"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.muteError = exports.getMutedErrors = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _get = _interopRequireDefault(require("lodash/get"));

/**
 * getMutedErrors - Returns the list of errors that have been muted for the given account
 *
 * @param {object} account io.cozy.accounts
 *
 * @returns {Array} An array of errors with a `type` and `mutedAt` field
 */
var getMutedErrors = function getMutedErrors(account) {
  return (0, _get.default)(account, 'mutedErrors', []);
};
/**
 * muteError - Adds an error to the list of muted errors for the given account
 *
 * @param {object} account   io.cozy.accounts
 * @param {string} errorType The type of the error to mute
 *
 * @returns {object} An updated io.cozy.accounts
 */


exports.getMutedErrors = getMutedErrors;

var muteError = function muteError(account, errorType) {
  var mutedErrors = getMutedErrors(account);
  mutedErrors.push({
    type: errorType,
    mutedAt: new Date().toISOString()
  });
  return (0, _objectSpread2.default)({}, account, {
    mutedErrors: mutedErrors
  });
};

exports.muteError = muteError;